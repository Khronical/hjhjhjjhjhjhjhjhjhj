---Statistics & Item ESP
local itemA = "none"
local itemB = "none"
local itemC = "none"

local ActiveItem = "none"

for i, v in pairs(game.Players:GetChildren()) do
    local NameMarker = Instance.new("BillboardGui")
    local PlayerName = Instance.new("TextLabel")
    local PlayerInv = Instance.new("TextLabel")
    local targetC = v.Name
    
    NameMarker.Name = "NameMarker"
    NameMarker.Parent = game.Workspace[targetC].Head
    NameMarker.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    NameMarker.Active = true
    NameMarker.AlwaysOnTop = true
    NameMarker.LightInfluence = 1.000
    NameMarker.Size = UDim2.new(0, 350, 0, 100)
    
    PlayerName.Name = "PlayerName"
    PlayerName.Parent = NameMarker
    PlayerName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    PlayerName.BackgroundTransparency = 1.000
    PlayerName.BorderSizePixel = 2
    PlayerName.Size = UDim2.new(0, 350, 0, 50)
    PlayerName.Font = Enum.Font.SourceSans
    PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
    PlayerName.Text = v.Name.." | Kills: ".. game.Workspace.GameState.Statistics[v.Name]["Players Killed"].Value.. " | Health: ".. v.Character.Humanoid.Health
    PlayerName.TextSize = 25.000
    PlayerName.TextStrokeTransparency = 0.500
    PlayerName.Visible = _G.MainVis

    PlayerInv.Name = "PlayerInv"
    PlayerInv.Parent = NameMarker
    PlayerInv.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    PlayerInv.BackgroundTransparency = 1
    PlayerInv.BorderSizePixel = 2
    PlayerInv.Size = UDim2.new(0, 350, 0, 2)
    PlayerInv.Font = Enum.Font.SourceSans
    PlayerInv.TextColor3 = Color3.fromRGB(255, 255, 255)
    PlayerInv.Text = "none | none | none"
    PlayerInv.TextSize = 25
    PlayerInv.TextStrokeTransparency = 0.5
    PlayerInv.Visible = _G.InvVis
    
    game:GetService("RunService").RenderStepped:Connect(function()
        PlayerName.Visible = _G.MainVis

        PlayerInv.Visible = _G.InvVis

        for i, v in pairs(game.Workspace[v.Name]:GetDescendants()) do
            if v:IsA("Tool") then
                ActiveItem = v.Name
            end
        end

        PlayerName.Text = v.Name.." | Kills: ".. game.Workspace.GameState.Statistics[v.Name]["Players Killed"].Value.." | Holding: ".. ActiveItem.." | Health: ".. v.Character.Humanoid.Health

        if game.Workspace.GameState.Statistics[targetC]["Players Killed"].Value > 0 then
            PlayerName.TextColor3 = Color3.new(255, 157, 0)
            PlayerInv.TextColor3 = Color3.new(255, 157, 0)
        else
            PlayerName.TextColor3 = Color3.new(255, 255, 255)
            PlayerInv.TextColor3 = Color3.new(255, 255, 255)
        end

        for i, v in pairs(v.Backpack:GetChildren()) do
            if i == 1 then
                itemA = v.Name
            end
            if i == 2 then
                    itemB = v.Name
            end
            if i == 3 then
                    itemC = v.Name
            end
        end

        if v.Backpack:FindFirstChild(itemA) then
            print("A")
        else    
            itemA = "none"
        end
                
        if v.Backpack:FindFirstChild(itemB) then
            print("B")
        else    
            itemB = "none"
        end
            
        if v.Backpack:FindFirstChild(itemC) then
            print("C")
        else
            itemC = "none"
        end
            
        if v.Backpack:FindFirstChild(ActiveItem) then
            print("D")
        else    
            ActiveItem = "none"
        end
    
        PlayerInv.Text = itemA.. " | ".. itemB.. " | ".. itemC

    end)
end

game.Players.PlayerAdded:Connect(function(newplr)
    local NameMarker = Instance.new("BillboardGui")
    local PlayerName = Instance.new("TextLabel")
    local PlayerInv = Instance.new("TextLabel")
    local targetC = newplr
    
    NameMarker.Name = "NameMarker"
    NameMarker.Parent = game.Workspace[targetC].Head
    NameMarker.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    NameMarker.Active = true
    NameMarker.AlwaysOnTop = true
    NameMarker.LightInfluence = 1.000
    NameMarker.Size = UDim2.new(0, 350, 0, 100)
    
    PlayerName.Name = "PlayerName"
    PlayerName.Parent = NameMarker
    PlayerName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    PlayerName.BackgroundTransparency = 1.000
    PlayerName.BorderSizePixel = 2
    PlayerName.Size = UDim2.new(0, 350, 0, 50)
    PlayerName.Font = Enum.Font.SourceSans
    PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
    PlayerName.Text = v.Name.." | Kills: ".. game.Workspace.GameState.Statistics[v.Name]["Players Killed"].Value.. " | Health: ".. v.Character.Humanoid.Health
    PlayerName.TextSize = 25.000
    PlayerName.TextStrokeTransparency = 0.500

    PlayerInv.Name = "PlayerInv"
    PlayerInv.Parent = NameMarker
    PlayerInv.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    PlayerInv.BackgroundTransparency = 1
    PlayerInv.BorderSizePixel = 2
    PlayerInv.Size = UDim2.new(0, 350, 0, 2)
    PlayerInv.Font = Enum.Font.SourceSans
    PlayerInv.TextColor3 = Color3.fromRGB(255, 255, 255)
    PlayerInv.Text = "none | none | none"
    PlayerInv.TextSize = 25
    PlayerInv.TextStrokeTransparency = 0.5
    
    game:GetService("RunService").RenderStepped:Connect(function()
        for i, v in pairs(game.Workspace[v.Name]:GetDescendants()) do
            if v:IsA("Tool") then
                ActiveItem = v.Name
            end
        end

        PlayerName.Text = newplr.Name.." | Kills: ".. game.Workspace.GameState.Statistics[newplr]["Players Killed"].Value.." | Holding: ".. ActiveItem.." | Health: ".. newplr.Character.Humanoid.Health

        if game.Workspace.GameState.Statistics[targetC]["Players Killed"].Value > 0 then
            PlayerName.TextColor3 = Color3.new(255, 157, 0)
            PlayerInv.TextColor3 = Color3.new(255, 157, 0)
        else
            PlayerName.TextColor3 = Color3.new(255, 255, 255)
            PlayerInv.TextColor3 = Color3.new(255, 255, 255)
        end

        for i, v in pairs(v.Backpack:GetChildren()) do
            if i == 1 then
                itemA = v.Name
            end
            if i == 2 then
                    itemB = v.Name
            end
            if i == 3 then
                    itemC = v.Name
            end
        end

        if v.Backpack:FindFirstChild(itemA) then
            print("A")
        else    
            itemA = "none"
        end
                
        if v.Backpack:FindFirstChild(itemB) then
            print("B")
        else    
            itemB = "none"
        end
            
        if v.Backpack:FindFirstChild(itemC) then
            print("C")
        else
            itemC = "none"
        end
            
        if v.Backpack:FindFirstChild(ActiveItem) then
            print("D")
        else    
            ActiveItem = "none"
        end
    
        PlayerInv.Text = itemA.. " | ".. itemB.. " | ".. itemC
    end)
end)
